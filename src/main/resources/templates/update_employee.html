<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: head">
<title>Update Employee</title>
<style>
.btn-primary {
	background-color: #4e73df;
	border-color: #4e73df;
	transition: 0.3s;
}

.btn-primary:disabled {
	background-color: #a8b6e2;
	border-color: #a8b6e2;
	cursor: not-allowed;
}

.form-control:focus {
	box-shadow: 0 0 8px rgba(78, 115, 223, 0.5);
	border-color: #4e73df;
}

@
keyframes fadeIn {from { opacity:0;
	transform: translateY(15px);
}

to {
	opacity: 1;
	transform: translateY(0);
}
}
</style>
</head>
<body>

	<div th:replace="header :: header"></div>
	<div class="container">
		<h2>Update Employee</h2>

		<form id="updateForm" th:action="@{'/update/'+${employeeObject.id}}"
			method="post" th:object="${employeeObject}">
			<div class="mb-3">
				<label for="name" class="form-label">Name:</label> <input
					type="text" id="name" class="form-control" th:field="*{name}"
					required>
				<div class="invalid-feedback">Please enter a valid name (min 2
					characters).</div>
			</div>

			<div class="mb-3">
				<label for="age" class="form-label">Age:</label> <input
					type="number" id="age" class="form-control" th:field="*{age}"
					min="18" max="65" required>
				<div class="invalid-feedback">Age must be between 18 and 65.</div>
			</div>

			<div class="mb-3">
				<label for="position" class="form-label">Position:</label> <input
					type="text" id="position" class="form-control"
					th:field="*{position}" required>
				<div class="invalid-feedback">Position cannot be empty.</div>
			</div>

			<div class="mb-3">
				<label for="department" class="form-label">Department:</label> <input
					type="text" id="department" class="form-control"
					th:field="*{department}" required>
				<div class="invalid-feedback">Department cannot be empty.</div>
			</div>

			<div class="mb-3">
				<label for="email" class="form-label">Email:</label> <input
					type="email" id="email" class="form-control" th:field="*{email}"
					required>
				<div class="invalid-feedback">Please enter a valid email
					address.</div>
			</div>

			<div class="mb-3">
				<label for="salary" class="form-label">Salary:</label> <input
					type="number" id="salary" class="form-control" th:field="*{salary}"
					min="1000" required>
				<div class="invalid-feedback">Salary must be at least 1000.</div>
			</div>

			<button type="submit" id="submitBtn" class="btn btn-warning" disabled>Update
				Employee</button>
		</form>

		<a href="/" class="btn btn-primary mt-3">Back to Employee List</a>
	</div>
	<!-- FOOTER -->
	<div th:replace="header :: Footer"></div>
	<script>
    const form = document.getElementById('updateForm');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('input', () => {
      let valid = form.checkValidity();
      submitBtn.disabled = !valid;
    });

    form.addEventListener('submit', (e) => {
      if (!form.checkValidity()) {
        e.preventDefault();
        form.classList.add('was-validated');
      }
    });
  </script>
</body>
</html>
